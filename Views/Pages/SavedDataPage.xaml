<Page x:Class="ToolVip.Views.Pages.SavedDataPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      xmlns:local="clr-namespace:ToolVip.Views.Pages" xmlns:models="clr-namespace:ToolVip.Models"
      ScrollViewer.CanContentScroll="False"
      Loaded="OnPageLoaded"
      Title="SavedDataPage">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <ui:TextBlock Text="Danh sách Đã Lưu trữ" 
                      FontSize="20" 
                      FontWeight="Bold" 
                      Margin="20,10"/>

        <ui:TextBox Grid.Row="1" 
                    Text="{Binding ViewModel.SearchKeyword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    PlaceholderText="Tìm theo biển số, họ tên, CCCD, SĐT..."
                    Icon="{ui:SymbolIcon Search24}"
                    ClearButtonEnabled="True"
                    Margin="20,5,20,10"
                    FontSize="14"/>

        <ui:ListView Grid.Row="2" 
                     ItemsSource="{Binding ViewModel.SavedProfiles}" 
                     SelectedItem="{Binding ViewModel.SelectedProfile, Mode=TwoWay}"
                     SelectionMode="Single"
                     x:Name="DriverListView"
                     Margin="10,10,10,70">
            <ui:ListView.ItemTemplate>
                <DataTemplate DataType="{x:Type models:DriverProfile}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <ui:SymbolIcon Symbol="CheckmarkCircle24" FontSize="25" Margin="5,0,15,0" Foreground="Green"/>

                        <StackPanel Grid.Column="1">
                            <ui:TextBlock Text="{Binding LicensePlate}" 
                                       FontWeight="Bold" FontSize="16"/>
                            <ui:TextBlock Text="{Binding FullName}" 
                                       Foreground="Gray"/>
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </ui:ListView.ItemTemplate>
        </ui:ListView>

        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    VerticalAlignment="Bottom" 
                    HorizontalAlignment="Right"
                    Margin="0,0,20,20">
            <!--<ui:Button Command="{Binding ViewModel.SyncOneProfileCommand}"
                       Content="Đồng bộ dòng chọn"
                       ToolTip="Gửi hồ sơ đang được bôi đen lên Server"
                       Icon="{ui:SymbolIcon ArrowUp24}"
                       Appearance="Secondary"
                       Height="40"
                       Margin="0,0,10,0"/>-->

            <ui:Button Command="{Binding ViewModel.SyncToServerCommand}"
                       Content="Đồng bộ Server"
                       Icon="{ui:SymbolIcon CloudArrowUp24}"
                       Appearance="Secondary"
                       Height="40"
                       Margin="0,0,10,0"/>

            <ui:Button Content="{Binding ViewModel.Count}"
                       Grid.Row="1"
                       Width="80" Height="40"
                       FontWeight="Bold"
                       FontSize="20"
                       Opacity="0.8"
                       VerticalAlignment="Bottom"
                       HorizontalAlignment="Right"
                       Appearance="Primary"
                       />
        </StackPanel>

    </Grid>
</Page>